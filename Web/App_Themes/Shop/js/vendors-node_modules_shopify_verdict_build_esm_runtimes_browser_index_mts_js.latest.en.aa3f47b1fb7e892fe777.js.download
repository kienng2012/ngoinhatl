/*! Licenses: https://cdn.shopify.com/shopifycloud/checkout-web/assets/LICENSE-c1-latest.txt */
(self.webpackChunkcheckout_web=self.webpackChunkcheckout_web||[]).push([["vendors-node_modules_shopify_verdict_build_esm_runtimes_browser_index_mts_js"],{mmNF:t=>{var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}};t.exports=e},ANhw:t=>{var e,n;e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var n=[],r=0;r<t.length;r+=3)for(var i=t[r]<<16|t[r+1]<<8|t[r+2],s=0;s<4;s++)8*r+6*s<=8*t.length?n.push(e.charAt(i>>>6*(3-s)&63)):n.push("=");return n.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,i=0;r<t.length;i=++r%4)0!=i&&n.push((e.indexOf(t.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|e.indexOf(t.charAt(r))>>>6-2*i);return n}},t.exports=n},BEtg:t=>{function e(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(e(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))}(t)||!!t._isBuffer)}},aCH8:(t,e,n)=>{var r,i,s,a,o;r=n("ANhw"),i=n("mmNF").utf8,s=n("BEtg"),a=n("mmNF").bin,(o=function(t,e){t.constructor==String?t=e&&"binary"===e.encoding?a.stringToBytes(t):i.stringToBytes(t):s(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var n=r.bytesToWords(t),u=8*t.length,l=1732584193,c=-271733879,h=-1732584194,m=271733878,g=0;g<n.length;g++)n[g]=16711935&(n[g]<<8|n[g]>>>24)|4278255360&(n[g]<<24|n[g]>>>8);n[u>>>5]|=128<<u%32,n[14+(u+64>>>9<<4)]=u;var d=o._ff,p=o._gg,f=o._hh,x=o._ii;for(g=0;g<n.length;g+=16){var y=l,A=c,w=h,E=m;l=d(l,c,h,m,n[g+0],7,-680876936),m=d(m,l,c,h,n[g+1],12,-389564586),h=d(h,m,l,c,n[g+2],17,606105819),c=d(c,h,m,l,n[g+3],22,-1044525330),l=d(l,c,h,m,n[g+4],7,-176418897),m=d(m,l,c,h,n[g+5],12,1200080426),h=d(h,m,l,c,n[g+6],17,-1473231341),c=d(c,h,m,l,n[g+7],22,-45705983),l=d(l,c,h,m,n[g+8],7,1770035416),m=d(m,l,c,h,n[g+9],12,-1958414417),h=d(h,m,l,c,n[g+10],17,-42063),c=d(c,h,m,l,n[g+11],22,-1990404162),l=d(l,c,h,m,n[g+12],7,1804603682),m=d(m,l,c,h,n[g+13],12,-40341101),h=d(h,m,l,c,n[g+14],17,-1502002290),l=p(l,c=d(c,h,m,l,n[g+15],22,1236535329),h,m,n[g+1],5,-165796510),m=p(m,l,c,h,n[g+6],9,-1069501632),h=p(h,m,l,c,n[g+11],14,643717713),c=p(c,h,m,l,n[g+0],20,-373897302),l=p(l,c,h,m,n[g+5],5,-701558691),m=p(m,l,c,h,n[g+10],9,38016083),h=p(h,m,l,c,n[g+15],14,-660478335),c=p(c,h,m,l,n[g+4],20,-405537848),l=p(l,c,h,m,n[g+9],5,568446438),m=p(m,l,c,h,n[g+14],9,-1019803690),h=p(h,m,l,c,n[g+3],14,-187363961),c=p(c,h,m,l,n[g+8],20,1163531501),l=p(l,c,h,m,n[g+13],5,-1444681467),m=p(m,l,c,h,n[g+2],9,-51403784),h=p(h,m,l,c,n[g+7],14,1735328473),l=f(l,c=p(c,h,m,l,n[g+12],20,-1926607734),h,m,n[g+5],4,-378558),m=f(m,l,c,h,n[g+8],11,-2022574463),h=f(h,m,l,c,n[g+11],16,1839030562),c=f(c,h,m,l,n[g+14],23,-35309556),l=f(l,c,h,m,n[g+1],4,-1530992060),m=f(m,l,c,h,n[g+4],11,1272893353),h=f(h,m,l,c,n[g+7],16,-155497632),c=f(c,h,m,l,n[g+10],23,-1094730640),l=f(l,c,h,m,n[g+13],4,681279174),m=f(m,l,c,h,n[g+0],11,-358537222),h=f(h,m,l,c,n[g+3],16,-722521979),c=f(c,h,m,l,n[g+6],23,76029189),l=f(l,c,h,m,n[g+9],4,-640364487),m=f(m,l,c,h,n[g+12],11,-421815835),h=f(h,m,l,c,n[g+15],16,530742520),l=x(l,c=f(c,h,m,l,n[g+2],23,-995338651),h,m,n[g+0],6,-198630844),m=x(m,l,c,h,n[g+7],10,1126891415),h=x(h,m,l,c,n[g+14],15,-1416354905),c=x(c,h,m,l,n[g+5],21,-57434055),l=x(l,c,h,m,n[g+12],6,1700485571),m=x(m,l,c,h,n[g+3],10,-1894986606),h=x(h,m,l,c,n[g+10],15,-1051523),c=x(c,h,m,l,n[g+1],21,-2054922799),l=x(l,c,h,m,n[g+8],6,1873313359),m=x(m,l,c,h,n[g+15],10,-30611744),h=x(h,m,l,c,n[g+6],15,-1560198380),c=x(c,h,m,l,n[g+13],21,1309151649),l=x(l,c,h,m,n[g+4],6,-145523070),m=x(m,l,c,h,n[g+11],10,-1120210379),h=x(h,m,l,c,n[g+2],15,718787259),c=x(c,h,m,l,n[g+9],21,-343485551),l=l+y>>>0,c=c+A>>>0,h=h+w>>>0,m=m+E>>>0}return r.endian([l,c,h,m])})._ff=function(t,e,n,r,i,s,a){var o=t+(e&n|~e&r)+(i>>>0)+a;return(o<<s|o>>>32-s)+e},o._gg=function(t,e,n,r,i,s,a){var o=t+(e&r|n&~r)+(i>>>0)+a;return(o<<s|o>>>32-s)+e},o._hh=function(t,e,n,r,i,s,a){var o=t+(e^n^r)+(i>>>0)+a;return(o<<s|o>>>32-s)+e},o._ii=function(t,e,n,r,i,s,a){var o=t+(n^(e|~r))+(i>>>0)+a;return(o<<s|o>>>32-s)+e},o._blocksize=16,o._digestsize=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);var n=r.wordsToBytes(o(t,e));return e&&e.asBytes?n:e&&e.asString?a.bytesToString(n):r.bytesToHex(n)}},hTnR:(t,e,n)=>{"use strict";n.d(e,{j8:()=>b});var r=n("aCH8");class i{constructor(t,e=10){this.value=16===e?`0x${t}`:t}modulo(t){return this.value=BigInt(this.value)%BigInt(t),this}toNumber(){return Number(this.value)}}const s=(t,e,n="")=>{const s=r(`${t}${e}${n}`);return new i(s,16).modulo(100).toNumber()};var a,o;!function(t){t.Draft="draft",t.Scheduled="scheduled",t.Running="running",t.Cooldown="cooldown",t.Ended="ended",t.Concluded="concluded"}(a||(a={})),function(t){t.Holdout="holdout",t.Exposure="exposure"}(o||(o={}));const u="{\n    handle\n    currentRollout {\n      salt\n      percentage\n    }\n    holdoutExperiments {\n     handle\n     variants {\n       handle\n       id\n       size\n     }\n    }\n    manualAssignments {\n      subjectId\n      variantHandle\n    }\n    shippedVariant { \n      handle\n      id\n      size\n    }\n    status\n    variants {\n      handle\n      id\n      size\n    }\n  }",l=`query experimentsByHandle($experimentHandles: [String!]!) {\n  experiments(handles: $experimentHandles) ${u}\n}`,c=`query experimentByHandle($experimentHandle: String!) {\n  experiment(handle: $experimentHandle) ${u}\n}`;class h{constructor(t,e){this.currentRequest=new Map,this.API_KEY=e,this.API_URL=`${t}/public/graphql`}async getExperimentByHandle(t){try{const e=await this.gqlRequest(c,{experimentHandle:t});if(e?.data?.experiment)return e.data.experiment;if(e.errors?.length)return null}catch(e){}return null}async getExperimentsByHandles(t){try{const e=await this.gqlRequest(l,{experimentHandles:t});if(e.data?.experiments)return e.data.experiments;if(e.errors?.length)return null}catch(e){}return null}gqlRequest(t,e){if(this.currentRequest.has(t))return this.currentRequest.get(t);const n=fetch(this.API_URL,{method:"POST",body:JSON.stringify({query:t,variables:e}),headers:{"content-type":"application/json",Authorization:`Token ${this.API_KEY}`}}).then((t=>t.json())).finally((()=>{this.currentRequest.delete(t)}));return this.currentRequest.set(t,n),n}}var m;!function(t){t.VariantFor="Verdict.experiment.variant_for",t.LookupVariantFor="Verdict.experiment.lookup_variant_for",t.Assign="Verdict.experiment.assign",t.ManualAssignmentFor="Verdict.experiment.manual_assignment_for",t.ShippedVariantAssignmentFor="Verdict.experiment.shipped_variant_assignment_for",t.PreviousAssignmentFor="Verdict.experiment.previous_assignment_for",t.InHoldout="Verdict.experiment.in_holdout",t.InRollout="Verdict.experiment.in_rollout",t.SubjectQualifies="Verdict.experiment.subject_qualifies",t.ExperimentNotFound="Verdict.experiment.fetcher.experiment_not_found",t.AssignmentConfigCache="Verdict.experiment.fetcher.assignment_config_cache",t.ExperimentsCache="Verdict.experiment.fetcher.experiments_cache"}(m||(m={}));const g={variant:null,isManualAssignment:!1};class d{constructor(t){this.experiment=t.rawExperiment,this.assignments=t.assignments,this.qualifier=t.qualifier,this.instrumentation=t.instrumentation}setQualifier(t){this.qualifier=t}removeQualifier(){this.qualifier=void 0}async variantFor(t){const{assignments:e,experiment:n}=this,r=await this.lookupVariantFor(t);if(r.variant)return r;if(!this.shouldAssignSubject(t))return g;if(!await this.qualify(t))return g;const i=this.getVariant(t);return i?(e.store(n.handle,t,i,n?.currentRollout?.salt||""),{variant:i,isManualAssignment:!1}):g}async lookupVariantFor(t){const e=this.manualAssignmentFor(t);if(e)return e;if(this.experiment.shippedVariant)return this.shippedVariantFor(this.experiment.shippedVariant,t);if(this.shouldReturnPreviousAssignment(t)){const e=await this.previousAssignment(t);if(e)return{variant:e,isManualAssignment:!1}}return g}subjectInRollout(t){const e=this.instrumentation?.mark();if(0===this.experiment.currentRollout?.percentage)return!1;if(!this.experiment.currentRollout?.percentage)return!0;const n=this.getDynamicRolloutHash(t),r=this.experiment.currentRollout?.percentage>n;return this.instrumentation?.notify({name:m.InRollout,tags:this.eventTags()},e),r}getVariant(t){return this.pickVariant(this.getHash(t),this.experiment.variants)}qualify(t){const e=this.instrumentation?.mark(),n=!this.qualifier||this.qualifier(t,this.experiment);return this.instrumentation?.notify({name:m.SubjectQualifies,tags:this.eventTags()},e),n}shouldReturnPreviousAssignment(t){return this.active()&&this.subjectInRollout(t)}shouldAssignSubject(t){return!(!this.active()||this.inCooldown()||!this.subjectInRollout(t)||this.inHoldout(t))}inHoldout(t){const e=this.instrumentation?.mark(),n=this.getHash(t),r=this.experiment.holdoutExperiments.some((t=>this.pickVariant(n,t.variants)===o.Holdout));return this.instrumentation?.notify({name:m.InHoldout,tags:this.eventTags()},e),r}async previousAssignment(t){const e=this.instrumentation?.mark(),{assignments:n,experiment:r}=this,i=await n.get(r.handle,t,r.currentRollout?.salt||"");return this.instrumentation?.notify({name:m.AssignmentConfigCache,tags:{hit:Boolean(i)}},e),i?i.variant:null}pickVariant(t,e){let n=0;for(const r of e)if(n+=r.size,n>t)return r.handle;return null}async shippedVariantFor(t,e){return this.inHoldout(e)?g:await this.qualify(e)?(this.instrumentation?.notify({name:m.ShippedVariantAssignmentFor,tags:this.eventTags()}),{variant:t.handle,isManualAssignment:!1}):g}manualAssignmentFor(t){const e=this.instrumentation?.mark(),n=this.experiment.manualAssignments.find((e=>e.subjectId===t));return this.instrumentation?.notify({name:m.ManualAssignmentFor,tags:this.eventTags()},e),n?{variant:n.variantHandle,isManualAssignment:!0}:null}getHash(t){const e=this.experiment.currentRollout?.salt||"";return s(this.experiment.handle,t,e)}getDynamicRolloutHash(t){return s(this.experiment.handle,t,"_in_beta")}eventTags(){return{handle:this.experiment.handle,num_qualifiers:this.qualifier?1:0,is_no_code_experiment:!1,is_holdout_experiment:!1}}active(){return this.experiment.status===a.Running||this.experiment.status===a.Cooldown}inCooldown(){return this.experiment.status===a.Cooldown}dehydrate(){return this.experiment}}function p(t){return 1e3*t}var f;!function(t){t.CacheFirst="cache-first",t.CacheOnly="cache-only",t.NetworkOnly="network-only"}(f||(f={}));class x{constructor(t){this.NAMESPACE="verdict:experiment",this.qualifiers=new Map,this.assignments=t.assignments,this.storageAdapter=t.storageAdapter,this.cacheConfiguration={cachePolicy:f.CacheFirst,cacheTTLSeconds:300,staleWhileRevalidateSeconds:60,staleIfErrorSeconds:300,...t.experimentCacheConfiguration||{}},this.networkFetcher=new h(t.apiHost,t.apiKey),this.instrumentation=t.instrumentation}async hydrate(t){await this.assignments.hydrate(t.assignments||[]);for(const e of t.experiments||[])await this.storeExperiment(e)}async dehydrate(){return{experiments:(await this.storageAdapter.getAll(this.NAMESPACE)).map((([,t])=>JSON.parse(t).experiment)),assignments:await this.assignments.dehydrate()||[]}}async lookupExperimentByHandle(t){if(this.cacheConfiguration.cachePolicy===f.CacheOnly)return(await this.getExperimentFromStorage(t))?.experiment||null;if(this.cacheConfiguration.cachePolicy===f.NetworkOnly)return this.fetchExperimentWithCacheFallback(t);if(this.cacheConfiguration.cachePolicy===f.CacheFirst){const e=await this.getExperimentFromStorage(t);return e?.experiment&&this.shouldServeStaleWhileRevalidate(e)?(this.fetchAndStoreExperimentsInStorage([t]),e.experiment):this.fetchExperimentWithCacheFallback(t)}return null}addQualifier(t,e){this.qualifiers.set(t,e)}removeQualifier(t){this.qualifiers.delete(t)}async fetchAndStoreExperimentsInStorage(t){const e=await this.getExperimentsFromNetwork(t);for(const n of e)await this.storeExperiment(n.experiment.dehydrate())}async fetchExperimentWithCacheFallback(t){try{const e=await this.getExperimentFromNetwork(t);if(!e?.experiment)throw new Error("Error Fetching Experiment");return await this.storeExperiment(e.experiment.dehydrate()),e.experiment}catch(e){const n=await this.getExperimentFromStorage(t,!0);return this.shouldServeStaleOnError(n)&&n?.experiment?n.experiment:null}}async getExperimentFromStorage(t,e){const n=await this.storageAdapter.get(this.keyFor(t));if(!n)return null;const r=JSON.parse(n),i=p(this.cacheConfiguration.cacheTTLSeconds);return this.storedExperimentAgeMilliseconds(r)>i&&!e?null:{experiment:new d({rawExperiment:r.experiment,assignments:this.assignments,qualifier:this.qualifiers.get(r.experiment.handle),instrumentation:this.instrumentation}),updatedAt:r.updatedAt}}async getExperimentFromNetwork(t){const e=await this.networkFetcher.getExperimentByHandle(t);return e?{experiment:new d({rawExperiment:e,assignments:this.assignments,qualifier:this.qualifiers.get(t)}),updatedAt:Date.now()}:null}async getExperimentsFromNetwork(t){const e=await this.networkFetcher.getExperimentsByHandles(t);return e?e.map((t=>({experiment:new d({rawExperiment:t,assignments:this.assignments,qualifier:this.qualifiers.get(t.handle)}),updatedAt:Date.now()}))):[]}storeExperiment(t){return this.storageAdapter.set(this.keyFor(t.handle),JSON.stringify({experiment:t,updatedAt:Date.now()}))}shouldServeStaleWhileRevalidate(t){return Date.now()-(t?.updatedAt||0)<p(this.cacheConfiguration.staleWhileRevalidateSeconds)}shouldServeStaleOnError(t){const e=this.storedExperimentAgeMilliseconds(t),n=p(this.cacheConfiguration.staleIfErrorSeconds);return this.cacheConfiguration.staleIfErrorSeconds>0&&e<n}storedExperimentAgeMilliseconds(t){return Date.now()-(t?.updatedAt||0)}keyFor(t){return`${this.NAMESPACE}:${t}`}}class y extends Error{constructor(t){super(t),this.name="AssignmentStorageError"}}class A{constructor(t,e){this.logger=e,this.sourceApp=t}logAssignment(t,e,n,r){const i={experiment:e,group:n,sourceApp:this.sourceApp,manualAssignment:r};"subjectId"in t?this.logger.produce({schemaId:"experiment_assignments/1.2",payload:{subjectId:t.subjectId,...i}}):"shopId"in t&&"userToken"in t?this.logger.produce({schemaId:"experiment_assignments_merchant_owned_pii/1.2",payload:{userToken:t.userToken,sessionToken:t.sessionToken,shopId:t.shopId,...i}}):"userToken"in t&&this.logger.produce({schemaId:"experiment_assignments_shopify_owned_pii/1.2",payload:{userToken:t.userToken,sessionToken:t.sessionToken,...i}})}}function w(t){return"subjectId"in t?t.subjectId:"userToken"in t?t.userToken:null}class E{constructor(t){this.DEFAULT_TTL_SECONDS=15778476,this.NAMESPACE="verdict:assignment",this.storageAdapter=t}delete(t,e,n){return this.storageAdapter.delete(this.keyFor(t,e,n))}flush(){return this.storageAdapter.flush(this.NAMESPACE)}async hydrate(t){for(const[e,n]of t)await this.storageAdapter.set(e,n,this.DEFAULT_TTL_SECONDS)}async dehydrate(){return await this.storageAdapter.getAll(this.NAMESPACE)}async get(t,e,n){const r=await this.storageAdapter.get(this.keyFor(t,e,n));return r?JSON.parse(r):null}getAll(){return this.storageAdapter.getAll(this.NAMESPACE)}store(t,e,n,r,i){const s={variant:n,createdAt:Date.now()};return this.storageAdapter.set(this.keyFor(t,e,r),JSON.stringify(s),i||this.DEFAULT_TTL_SECONDS)}keyFor(t,e,n){return`${this.NAMESPACE}:${t}:${n}:${e}`}}class v{constructor(){this.storage=new Map}delete(t){return this.storage.delete(t),!0}get(t){return this.storage.get(t)||null}getAll(){return Array.from(this.storage.entries())}flush(){return this.storage.clear(),!0}set(t,e){return this.storage.set(t,e),!0}}class S extends Error{constructor(t,e){super(t),this.cause=e}}class _{constructor(t){this.configuration=this.buildVerdictConfiguration(t)}addQualifier(t,e){this.configuration.experiments.addQualifier(t,e)}removeQualifier(t){this.configuration.experiments.removeQualifier(t)}async assignVariant(t,e,n={shouldLogAssignment:!0}){try{const{logger:r}=this.configuration,i=w(e);if(!i)return null;const s=await this.lookupExperiment(t);if(!s)return null;const a=this.configuration.instrumentation?.mark(),{variant:o,isManualAssignment:u}=await s.variantFor(i);return this.configuration.instrumentation?.notify({name:m.VariantFor,tags:this.defaultTags(t)},a),o?(n.shouldLogAssignment&&r?.logAssignment(e,t,o,u),o):null}catch(r){return this.configuration.onError(new S(`Error assigning subject for experiment: ${t}`,r)),null}}async lookupVariant(t,e){try{const n=w(e);if(!n)return null;const r=await this.lookupExperiment(t);if(!r)return null;const i=this.configuration.instrumentation?.mark(),{variant:s}=await r.lookupVariantFor(n);return this.configuration.instrumentation?.notify({name:m.LookupVariantFor,tags:this.defaultTags(t)},i),s||null}catch(n){return this.configuration.onError(new S(`Error looking up subject for experiment: ${t}`,n)),null}}async preload(t){try{await this.configuration.experiments.fetchAndStoreExperimentsInStorage(t)}catch(e){this.configuration.onError(new S("Error preloading experiments",e))}}async hydrate(t){try{await this.configuration.experiments.hydrate(t)}catch(e){this.configuration.onError(new S("Hydration error",e))}}async dehydrate(){try{return await this.configuration.experiments.dehydrate()}catch(t){return this.configuration.onError(new S("Dehydration error",t)),null}}async lookupExperiment(t){const e=this.configuration.instrumentation?.mark(),n=await this.configuration.experiments.lookupExperimentByHandle(t);return n?(this.configuration.instrumentation?.notify({name:m.ExperimentsCache,tags:this.defaultTags(t)},e),n):(this.configuration.instrumentation?.notify({name:m.ExperimentNotFound,tags:this.defaultTags(t)}),null)}buildVerdictConfiguration(t){const e={experiments:new x({apiKey:t?.apiKey||"",apiHost:t?.apiHost||"https://experiments.shopify.com",assignments:new E(t?.assignmentStorage||new v),storageAdapter:t?.experimentStorage||new v,experimentCacheConfiguration:t?.experimentCacheConfiguration||{},instrumentation:t?.instrumentation}),onError:t?.onError||console.error};return t?.instrumentation&&(e.instrumentation=t?.instrumentation),t?.logger&&(e.logger=new A(t.appName,t.logger)),e}defaultTags(t){return{handle:t,is_no_code_experiment:!1,is_holdout_experiment:!1}}}class k{constructor(){if(!this.storageAvailable())throw new y("localStorage couldn't be initialized. It may be full or disabled in the current environment")}delete(t){try{return localStorage.removeItem(t),!0}catch(e){const n=e instanceof Error?e.message:"Unknown Error";throw new y(`Verdict failed to delete '${t}' from Assignment Local Storage. Original Error: ${n}`)}}get(t){try{return localStorage.getItem(t)}catch(e){const n=e instanceof Error?e.message:"Unknown Error";throw new y(`Verdict failed to read '${t}' from Assignment Local Storage. Original Error: ${n}`)}}getAll(t){return this.allValues(t)}set(t,e){try{return localStorage.setItem(t,e),!0}catch(n){const e=n instanceof Error?n.message:"Unknown Error";throw new y(`Verdict failed to set '${t}' to Assignment Local Storage. Original Error: ${e}`)}}flush(t){return this.allValues(t).forEach((([t])=>this.delete(t))),!0}allValues(t){const e=[];for(let n=0;n<localStorage.length;n++){const r=localStorage.key(n);r?.trim()?.startsWith(t)&&e.push([r,localStorage.getItem(r)])}return e}storageAvailable(){let t;try{t=window.localStorage;const e="__storage_test__";return t.setItem(e,e),t.removeItem(e),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}}class b extends _{constructor(t){const e={...t};e.apiHost||(e.apiHost="https://experiments.shopify.com"),e.assignmentStorage||(e.assignmentStorage=new k),e.experimentStorage||(e.experimentStorage=new k),super(e)}}}}]);